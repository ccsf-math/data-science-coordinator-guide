{"version":2,"kind":"Article","sha256":"0aa40de007755b6b8983c748c21c86ae3e484d9303211a8e0ca73e7f3c6890e7","slug":"jupyterhub","location":"/jupyterhub.md","dependencies":[],"frontmatter":{"title":"JupyterHub","license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/ccsf-math/data-science-coordinator-guide","funding":[{"statement":"This work was supported by California Education Learning Lab through the Building Inclusive and Collaborative Foundations in Data Science grant."}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ccsf-math/data-science-coordinator-guide/blob/main/jupyterhub.md","exports":[{"format":"md","filename":"jupyterhub.md","url":"/jupyterhub-8a9868288d22582c19542bc586d6a8b8.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"A ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dGtgJWKBeH"},{"type":"link","url":"https://jupyter.org/hub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"JupyterHub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AAZzG4t65q"}],"urlSource":"https://jupyter.org/hub","key":"pfqnw60bvH"},{"type":"text","value":", grant-supported by ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KpbwIXosVY"},{"type":"link","url":"https://www.cloudbank.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Cloudbank","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RhRHRaPrvQ"}],"urlSource":"https://www.cloudbank.org/","key":"bWTPkDimtd"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hYeM3Nx06D"},{"type":"link","url":"https://2i2c.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2i2c","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Ce32ckO2O4"}],"urlSource":"https://2i2c.org/","key":"lapkFkmXTI"},{"type":"text","value":", is the central piece of our technology. The hub’s address is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QAsKKPHbo1"},{"type":"inlineCode","value":"https://ccsf.cloudbank.2i2c.cloud","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"l0a56AeCAU"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GtkXutjVQC"}],"key":"Qckg9cRGNr"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"When a user clicks an ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"QgrLPGS4X9"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"bPzv3giWwK"},{"type":"text","value":" link (e.g., from Canvas or a website), the system checks whether the user is authenticated with JupyterHub. If not, the user is redirected through the authentication flow (e.g., via CILogon + Google). Once authenticated, the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"N7MWWWE0Dc"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UTbLxInv7A"},{"type":"text","value":" link pulls content from a GitHub repository into the user’s environment and optionally opens a specific notebook or file.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CEnzjdcmIS"}],"key":"oZc42AHuYi"},{"type":"thematicBreak","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DopcVhnVYH"},{"type":"heading","depth":2,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Authentication","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"yl4YsrDU9y"}],"identifier":"authentication","label":"Authentication","html_id":"authentication","implicit":true,"key":"pPObGWqvGd"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CloudBank hubs are configured to use ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eaO84jJAP6"},{"type":"link","url":"https://www.cilogon.org/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CILogon","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"yKRYh3tSxB"}],"urlSource":"https://www.cilogon.org/","key":"PMjZvsW0ZH"},{"type":"text","value":" to manage user access. By default, users authenticate with their Google accounts. At CCSF, the ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"GNmfvng611"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"T1RdiNb59J"},{"type":"text","value":" domain is associated with Google, so anyone logging in with a ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"JrMqbw8Azf"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"p0pafkIN8N"},{"type":"text","value":" account is automatically approved.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eMjGks9WqB"}],"key":"uIizT12HV0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Consult IT’s webpage ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"lhErIYBOXk"},{"type":"link","url":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"CCSFmail FAQ for Students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"E9PZwTZUTT"}],"urlSource":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","key":"Q6soqWSWQD"},{"type":"text","value":" for information on student Google accounts.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"vPxHeWtRFU"}],"key":"l8Q2rnTPXc"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"For information on employee Google accounts visit the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"iaEddzBG31"},{"type":"link","url":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Google Accounts FAQ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"lisb7JlCwz"}],"urlSource":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","key":"EVPSuRlK9S"},{"type":"text","value":" on the employee intranet.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"WAejBcqM3z"}],"key":"KrsSe5mM3Q"}],"key":"TBbQvnSIFw"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"If a user logs in with a different Google-associated domain (e.g., ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"CYPLBTXS7O"},{"type":"inlineCode","value":"gmail.com","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ULRAZkaDNv"},{"type":"text","value":", ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"SNCotNAq4q"},{"type":"inlineCode","value":"berkeley.edu","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"V7Pz37i8ug"},{"type":"text","value":"), their account must be manually added to an approved list. To request access, the user should send their Google account email address to ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"x2bS6hjubp"},{"type":"crossReference","label":"Sean Morris","identifier":"term-sean morris","kind":"definitionTerm","children":[{"type":"text","value":"Sean Morris","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"zcDO2CscGx"}],"template":"{name}","resolved":true,"html_id":"term-sean-morris","remote":true,"url":"/contacts","dataUrl":"/contacts.json","key":"XSGNAD3Ydv"},{"type":"text","value":". Once the account is approved, they will be able to log in with that Google account.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"dLDhg668YU"}],"key":"ghBYFJt8tp"},{"type":"mermaid","value":"flowchart TD;\n    A[User accesses JupyterHub] --> B[Redirect to CILogon]\n    B --> C[User selects Google as Identity Provider]\n    C --> D[Redirect to Google Login]\n    D --> E[User logs in with Google]\n    E --> F[Google returns OAuth token to CILogon]\n    F --> G[CILogon returns assertion to JupyterHub]\n    G --> H[JupyterHub authenticates user]\n    H --> I[Spawn user server]\n    I --> J[User lands on JupyterHub interface]\n    J --> K[User interacts with JupyterHub]\n    \n    subgraph Google Services\n        E\n        F\n    end\n\n    subgraph CILogon\n        C\n        D\n        G\n    end\n\n    subgraph JupyterHub\n        B\n        H\n        I\n        J\n        K\n    end","position":{"start":{"line":20,"column":1},"end":{"line":51,"column":1}},"key":"GSHhQvy9uN"},{"type":"thematicBreak","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"MkH9w9dYlf"},{"type":"heading","depth":2,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"xdnXmdNj37"}],"identifier":"nbgitpuller","label":"nbgitpuller","html_id":"nbgitpuller","implicit":true,"key":"uEjoFZ7SH4"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"In order to synchronize the content hosted on GitHub with the content on a user’s JupyterHub storage while automatically handling the conflicts involved ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"voh8ab1W1a"},{"type":"inlineCode","value":"git","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"kTwN4XitDa"},{"type":"text","value":", we use the application ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"JvLLyNooz9"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"aHRrNLkIo4"}],"urlSource":"https://nbgitpuller.readthedocs.io/","key":"MWbH8BopaY"},{"type":"text","value":". Through ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"X6tNDCQuqB"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"BVLuvk29he"},{"type":"text","value":", we create links which our users click to pull in content available on a specified GitHub repository with the user’s files on the specified JupyterHub server. When there is a merge conflict, the tool handles the merge automatically according to the rules posted in the ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"WEcDIWQG5o"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"UyNrSj6nNM"},{"type":"text","value":" documentation","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"clDMyvlWU5"}],"urlSource":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","key":"gTp0VJL9r9"},{"type":"text","value":".","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"grHJ0iYNye"}],"key":"rUuRUQ1FLF"},{"type":"mermaid","value":"flowchart TD;\n    A[User clicks nbgitpuller link] --> B[nbgitpuller parses URL and identifies repo]\n    B --> C[nbgitpuller fetches repository content from GitHub]\n    C --> D[nbgitpuller pulls files into user's Jupyter environment]\n\n    subgraph GitHub\n        C\n    end\n\n    subgraph Canvas/Website\n        A\n    end\n\n    subgraph JupyterHub\n        B\n        D\n    end\n","position":{"start":{"line":58,"column":1},"end":{"line":77,"column":1}},"key":"FSPPOL2ohL"}],"key":"GJ6i3Ypssk"}],"key":"tGhkGEmE1y"},"references":{"cite":{"order":[],"data":{}}}}