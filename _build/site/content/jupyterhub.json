{"version":2,"kind":"Article","sha256":"a7a21056fef46bec54f82eb52bb5f0aa2ece14e8bc3a62bdce46d1012315d868","slug":"jupyterhub","location":"/jupyterhub.md","dependencies":[],"frontmatter":{"title":"JupyterHub","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Shawn Wiggins","given":"Shawn","family":"Wiggins"},"name":"Shawn Wiggins","affiliations":["City College of San Francisco"],"id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/ccsf-math-108/materials","funding":[{"statement":"This work was supported by California Education Learning Lab through the Building Inclusive and Collaborative Foundations in Data Science grant."}],"affiliations":[{"id":"City College of San Francisco","name":"City College of San Francisco"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ccsf-math-108/materials/blob/main/jupyterhub.md","exports":[{"format":"md","filename":"jupyterhub.md","url":"/jupyterhub-2c9df2c4d9e24b34d5e2e2f0e82e35ca.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aeGZjZ4kh3"},{"type":"link","url":"https://jupyter.org/hub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"JupyterHub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yX0uuzJ9Ya"}],"urlSource":"https://jupyter.org/hub","key":"B2BnOmmh8y"},{"type":"text","value":", grant-supported by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"j1q1h7ZnD5"},{"type":"link","url":"https://www.cloudbank.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Cloudbank","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lU2JfpDpac"}],"urlSource":"https://www.cloudbank.org/","key":"LZc0ZJ6YKG"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GqdFY10tk6"},{"type":"link","url":"https://2i2c.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"2i2c","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"F2YTjOrexL"}],"urlSource":"https://2i2c.org/","key":"gI9rzWB692"},{"type":"text","value":", is the central piece of our technology. The hub’s address is ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VvOxaD9bn6"},{"type":"inlineCode","value":"https://ccsf.cloudbank.2i2c.cloud","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UFUE5BE2n6"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ma7rloushd"}],"key":"k6T17bDGeB"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"When a user clicks an ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"t8mF4oB1nR"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"k2OupxdWuG"},{"type":"text","value":" link (e.g., from Canvas or a website), the system checks whether the user is authenticated with JupyterHub. If not, the user is redirected through the authentication flow (e.g., via CILogon + Google). Once authenticated, the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SSnqXLL7Mk"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"N37XFurgR6"},{"type":"text","value":" link pulls content from a GitHub repository into the user’s environment and optionally opens a specific notebook or file.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LTd8zMcLhJ"}],"key":"ySIrWhAdzs"},{"type":"thematicBreak","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"mlVzpZaAe7"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Authentication","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CakDgDKJ9t"}],"identifier":"authentication","label":"Authentication","html_id":"authentication","implicit":true,"key":"mhqdG5KJT8"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"CloudBank hubs are configured to use ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"c9El9tmGwm"},{"type":"link","url":"https://www.cilogon.org/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"CILogon","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"d8aNas3GF5"}],"urlSource":"https://www.cilogon.org/","key":"MhW1cyl1BO"},{"type":"text","value":" to manage user access. By default, users authenticate with their Google accounts. At CCSF, the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sAloc7vp9h"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"yTvIZT3EqL"},{"type":"text","value":" domain is associated with Google, so anyone logging in with a ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"G7oGAOMd47"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"LPYYtt32qN"},{"type":"text","value":" account is automatically approved.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DLJTC5O32b"}],"key":"vu9BpxyKoB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Consult IT’s webpage ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"t3LDLelsWc"},{"type":"link","url":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CCSFmail FAQ for Students","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Pjiqj6VBJz"}],"urlSource":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","key":"REU6iG6Aev"},{"type":"text","value":" for information on student Google accounts.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YisoKeEBCv"}],"key":"Ea1bodBbe8"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"For information on employee Google accounts visit the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"sDmzMKjCvj"},{"type":"link","url":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Google Accounts FAQ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ceen9kXAHJ"}],"urlSource":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","key":"pmrzJRc4gW"},{"type":"text","value":" on the employee intranet.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"YUiYaARi1H"}],"key":"pWOEB9cCYx"}],"key":"T5HZgyFuAj"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"If a user logs in with a different Google-associated domain (e.g., ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"lkfMDHdKpO"},{"type":"inlineCode","value":"gmail.com","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Z2FTvCA56V"},{"type":"text","value":", ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Z4oPdr9rZr"},{"type":"inlineCode","value":"berkeley.edu","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"MSE4ue1LvC"},{"type":"text","value":"), their account must be manually added to an approved list. To request access, the user should send their Google account email address to ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"F6ozTSIT1X"},{"type":"crossReference","label":"Sean Morris","identifier":"term-sean morris","kind":"definitionTerm","children":[{"type":"text","value":"Sean Morris","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"sH2gJhxDcP"}],"template":"{name}","resolved":true,"html_id":"term-sean-morris","remote":true,"url":"/contacts","dataUrl":"/contacts.json","key":"VpRdohdR4z"},{"type":"text","value":". Once the account is approved, they will be able to log in with that Google account.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"VkVKVDuiP9"}],"key":"mvgHJqL2cn"},{"type":"mermaid","value":"flowchart TD;\n    A[User accesses JupyterHub] --> B[Redirect to CILogon]\n    B --> C[User selects Google as Identity Provider]\n    C --> D[Redirect to Google Login]\n    D --> E[User logs in with Google]\n    E --> F[Google returns OAuth token to CILogon]\n    F --> G[CILogon returns assertion to JupyterHub]\n    G --> H[JupyterHub authenticates user]\n    H --> I[Spawn user server]\n    I --> J[User lands on JupyterHub interface]\n    J --> K[User interacts with JupyterHub]\n    \n    subgraph Google Services\n        E\n        F\n    end\n\n    subgraph CILogon\n        C\n        D\n        G\n    end\n\n    subgraph JupyterHub\n        B\n        H\n        I\n        J\n        K\n    end","position":{"start":{"line":18,"column":1},"end":{"line":49,"column":1}},"key":"Sq9d6f20U6"},{"type":"thematicBreak","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"pvn7urnlYx"},{"type":"heading","depth":2,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"cejBF2cneO"}],"identifier":"nbgitpuller","label":"nbgitpuller","html_id":"nbgitpuller","implicit":true,"key":"GZNWHm85An"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"In order to synchronize the content hosted on GitHub with the content on a user’s JupyterHub storage while automatically handling the conflicts involved ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"UFRvnBxDfC"},{"type":"inlineCode","value":"git","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"W7rJvrKmLu"},{"type":"text","value":", we use the application ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"A2HULFGMnD"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"GxM2M8NP3W"}],"urlSource":"https://nbgitpuller.readthedocs.io/","key":"VAEDLcranS"},{"type":"text","value":". Through ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"gj8jipaW04"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"JG24sbOpwS"},{"type":"text","value":", we create links which our users click to pull in content available on a specified GitHub repository with the user’s files on the specified JupyterHub server. When there is a merge conflict, the tool handles the merge automatically according to the rules posted in the ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"dqqf9awChp"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"snOEWQqckI"},{"type":"text","value":" documentation","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"ArEIav6xgv"}],"urlSource":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","key":"rDtTS6XlQF"},{"type":"text","value":".","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"PcgfwF8YsX"}],"key":"mEoqydiIm8"},{"type":"mermaid","value":"flowchart TD;\n    A[User clicks nbgitpuller link] --> B[nbgitpuller parses URL and identifies repo]\n    B --> C[nbgitpuller fetches repository content from GitHub]\n    C --> D[nbgitpuller pulls files into user's Jupyter environment]\n\n    subgraph GitHub\n        C\n    end\n\n    subgraph Canvas/Website\n        A\n    end\n\n    subgraph JupyterHub\n        B\n        D\n    end\n","position":{"start":{"line":56,"column":1},"end":{"line":75,"column":1}},"key":"be5AAwsv0P"}],"key":"ezDXmmTdKc"}],"key":"dMNYYRCxOt"},"references":{"cite":{"order":[],"data":{}}}}