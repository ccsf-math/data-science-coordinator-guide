{"version":2,"kind":"Article","sha256":"a7a21056fef46bec54f82eb52bb5f0aa2ece14e8bc3a62bdce46d1012315d868","slug":"jupyterhub","location":"/jupyterhub.md","dependencies":[],"frontmatter":{"title":"JupyterHub","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Shawn Wiggins","given":"Shawn","family":"Wiggins"},"name":"Shawn Wiggins","affiliations":["City College of San Francisco"],"id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/ccsf-math-108/materials","funding":[{"statement":"This work was supported by California Education Learning Lab through the Building Inclusive and Collaborative Foundations in Data Science grant."}],"affiliations":[{"id":"City College of San Francisco","name":"City College of San Francisco"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ccsf-math-108/materials/blob/main/jupyterhub.md","exports":[{"format":"md","filename":"jupyterhub.md","url":"/jupyterhub-2c9df2c4d9e24b34d5e2e2f0e82e35ca.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lcMBDOg8y6"},{"type":"link","url":"https://jupyter.org/hub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"JupyterHub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jnNhhnVGTj"}],"urlSource":"https://jupyter.org/hub","key":"UGQPF62dTZ"},{"type":"text","value":", grant-supported by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mpviYKHo6L"},{"type":"link","url":"https://www.cloudbank.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Cloudbank","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eSARLwgmMy"}],"urlSource":"https://www.cloudbank.org/","key":"GdEpv1HUnW"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OCtcbfPtaO"},{"type":"link","url":"https://2i2c.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"2i2c","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sCks6KlRpb"}],"urlSource":"https://2i2c.org/","key":"XBqX4cG8JY"},{"type":"text","value":", is the central piece of our technology. The hub’s address is ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DzePGAe23y"},{"type":"inlineCode","value":"https://ccsf.cloudbank.2i2c.cloud","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"igMWFo4yeb"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VAFCdA6Rvl"}],"key":"muYIWPpIn0"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"When a user clicks an ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"d2R5HXAZCO"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kPPWhDZzmQ"},{"type":"text","value":" link (e.g., from Canvas or a website), the system checks whether the user is authenticated with JupyterHub. If not, the user is redirected through the authentication flow (e.g., via CILogon + Google). Once authenticated, the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ppVDd8aKRt"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CeVlzzlB7r"},{"type":"text","value":" link pulls content from a GitHub repository into the user’s environment and optionally opens a specific notebook or file.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"q2sx0FWTAj"}],"key":"RFwjoPLJOD"},{"type":"thematicBreak","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YnbPtbdMKE"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Authentication","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"E4O7mQapJm"}],"identifier":"authentication","label":"Authentication","html_id":"authentication","implicit":true,"key":"rZcylk7MG2"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"CloudBank hubs are configured to use ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"g2gaZK4hcY"},{"type":"link","url":"https://www.cilogon.org/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"CILogon","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NbIGj6Ysbs"}],"urlSource":"https://www.cilogon.org/","key":"O4yhrOkmt8"},{"type":"text","value":" to manage user access. By default, users authenticate with their Google accounts. At CCSF, the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"VzxHgOPBY0"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"BOyRSmeGbK"},{"type":"text","value":" domain is associated with Google, so anyone logging in with a ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"IWBTAYolJe"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"WlIYLWbq0T"},{"type":"text","value":" account is automatically approved.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"zNTlEO6Sgf"}],"key":"AmpCUdR9ah"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Consult IT’s webpage ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"yt9oW2mbOf"},{"type":"link","url":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CCSFmail FAQ for Students","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"OT0NT91jKX"}],"urlSource":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","key":"cwwmCesENV"},{"type":"text","value":" for information on student Google accounts.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"BTnIJSlFue"}],"key":"uFR7xpS0IW"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"For information on employee Google accounts visit the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"WpE5L1C7Tm"},{"type":"link","url":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Google Accounts FAQ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ZcZSiIrEgP"}],"urlSource":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","key":"X8yG2ee24X"},{"type":"text","value":" on the employee intranet.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"fSXtqlzTqF"}],"key":"R6xMvqeoKU"}],"key":"h0E6DjFfMO"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"If a user logs in with a different Google-associated domain (e.g., ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fTCSLS6jgb"},{"type":"inlineCode","value":"gmail.com","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Nm44ZIbujF"},{"type":"text","value":", ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qdPu3QOIXi"},{"type":"inlineCode","value":"berkeley.edu","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"bYtWPgDX2s"},{"type":"text","value":"), their account must be manually added to an approved list. To request access, the user should send their Google account email address to ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"f8mgX6ICTv"},{"type":"crossReference","label":"Sean Morris","identifier":"term-sean morris","kind":"definitionTerm","children":[{"type":"text","value":"Sean Morris","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"pdgRv30EKo"}],"template":"{name}","resolved":true,"html_id":"term-sean-morris","remote":true,"url":"/contacts","dataUrl":"/contacts.json","key":"E8oVtN13HS"},{"type":"text","value":". Once the account is approved, they will be able to log in with that Google account.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"gMn2DUxQSF"}],"key":"cSHOmipzZg"},{"type":"mermaid","value":"flowchart TD;\n    A[User accesses JupyterHub] --> B[Redirect to CILogon]\n    B --> C[User selects Google as Identity Provider]\n    C --> D[Redirect to Google Login]\n    D --> E[User logs in with Google]\n    E --> F[Google returns OAuth token to CILogon]\n    F --> G[CILogon returns assertion to JupyterHub]\n    G --> H[JupyterHub authenticates user]\n    H --> I[Spawn user server]\n    I --> J[User lands on JupyterHub interface]\n    J --> K[User interacts with JupyterHub]\n    \n    subgraph Google Services\n        E\n        F\n    end\n\n    subgraph CILogon\n        C\n        D\n        G\n    end\n\n    subgraph JupyterHub\n        B\n        H\n        I\n        J\n        K\n    end","position":{"start":{"line":18,"column":1},"end":{"line":49,"column":1}},"key":"YoXABHmE44"},{"type":"thematicBreak","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"VSZCIsEzC0"},{"type":"heading","depth":2,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"CVFmsxoe9L"}],"identifier":"nbgitpuller","label":"nbgitpuller","html_id":"nbgitpuller","implicit":true,"key":"ghAMcCkD12"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"In order to synchronize the content hosted on GitHub with the content on a user’s JupyterHub storage while automatically handling the conflicts involved ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"j3EeOZ0RdN"},{"type":"inlineCode","value":"git","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"iM2SOPRsH1"},{"type":"text","value":", we use the application ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"jgZYbTOeRS"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"DknjXXSVqM"}],"urlSource":"https://nbgitpuller.readthedocs.io/","key":"fBi3sGyqkQ"},{"type":"text","value":". Through ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"AnFfSlspD6"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"zRRjnFViKs"},{"type":"text","value":", we create links which our users click to pull in content available on a specified GitHub repository with the user’s files on the specified JupyterHub server. When there is a merge conflict, the tool handles the merge automatically according to the rules posted in the ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"bG8C1Vlfvp"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"LFkYwx0Wl7"},{"type":"text","value":" documentation","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"kynngZwaVk"}],"urlSource":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","key":"NgA1cz0AnD"},{"type":"text","value":".","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"VoqCzfNgYp"}],"key":"LawUlcQvYY"},{"type":"mermaid","value":"flowchart TD;\n    A[User clicks nbgitpuller link] --> B[nbgitpuller parses URL and identifies repo]\n    B --> C[nbgitpuller fetches repository content from GitHub]\n    C --> D[nbgitpuller pulls files into user's Jupyter environment]\n\n    subgraph GitHub\n        C\n    end\n\n    subgraph Canvas/Website\n        A\n    end\n\n    subgraph JupyterHub\n        B\n        D\n    end\n","position":{"start":{"line":56,"column":1},"end":{"line":75,"column":1}},"key":"GYoYdHeQ4u"}],"key":"IMeQHNIsbU"}],"key":"ph7aUK5PDC"},"references":{"cite":{"order":[],"data":{}}}}