{"version":2,"kind":"Article","sha256":"0aa40de007755b6b8983c748c21c86ae3e484d9303211a8e0ca73e7f3c6890e7","slug":"jupyterhub","location":"/jupyterhub.md","dependencies":[],"frontmatter":{"title":"JupyterHub","license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/ccsf-math/data-science-coordinator-guide","funding":[{"statement":"This work was supported by California Education Learning Lab through the Building Inclusive and Collaborative Foundations in Data Science grant."}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ccsf-math/data-science-coordinator-guide/blob/main/jupyterhub.md","exports":[{"format":"md","filename":"jupyterhub.md","url":"/jupyterhub-8a9868288d22582c19542bc586d6a8b8.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"A ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wjOVk0nuLH"},{"type":"link","url":"https://jupyter.org/hub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"JupyterHub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"y5CbrXYgQX"}],"urlSource":"https://jupyter.org/hub","key":"VUk7Snav61"},{"type":"text","value":", grant-supported by ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"j0PlOpmyZS"},{"type":"link","url":"https://www.cloudbank.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Cloudbank","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jltr4tX4If"}],"urlSource":"https://www.cloudbank.org/","key":"M0k6Dq6Wqa"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cnaebJICQ3"},{"type":"link","url":"https://2i2c.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2i2c","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AyL1XzTKEu"}],"urlSource":"https://2i2c.org/","key":"zTwMbd5AiZ"},{"type":"text","value":", is the central piece of our technology. The hub’s address is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DsVpE1RxZA"},{"type":"inlineCode","value":"https://ccsf.cloudbank.2i2c.cloud","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YJQNyUAaYY"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bSHgVyufRN"}],"key":"P5btgbS9CD"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"When a user clicks an ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"yGXhMQPkvu"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TMRRisfAjB"},{"type":"text","value":" link (e.g., from Canvas or a website), the system checks whether the user is authenticated with JupyterHub. If not, the user is redirected through the authentication flow (e.g., via CILogon + Google). Once authenticated, the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"alClutwxwC"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"g3mH7Uef5M"},{"type":"text","value":" link pulls content from a GitHub repository into the user’s environment and optionally opens a specific notebook or file.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"INpAg4yU6w"}],"key":"qiOuBD4wZy"},{"type":"thematicBreak","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xZ9CYGmqtZ"},{"type":"heading","depth":2,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Authentication","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KTa02Nre5I"}],"identifier":"authentication","label":"Authentication","html_id":"authentication","implicit":true,"key":"GiJ3FQyKyt"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CloudBank hubs are configured to use ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"SzkbzU2q0a"},{"type":"link","url":"https://www.cilogon.org/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CILogon","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"XTQ5stliMU"}],"urlSource":"https://www.cilogon.org/","key":"b6UolKuPz5"},{"type":"text","value":" to manage user access. By default, users authenticate with their Google accounts. At CCSF, the ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YbozS1fD1r"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qs1HpSln1Z"},{"type":"text","value":" domain is associated with Google, so anyone logging in with a ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"s3qm6UJdPo"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ThBuBqvudl"},{"type":"text","value":" account is automatically approved.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"kVcVKsaJUA"}],"key":"WyPy7BMhwt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Consult IT’s webpage ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LHFCTtSaY0"},{"type":"link","url":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"CCSFmail FAQ for Students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"MgdFPjDR8s"}],"urlSource":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","key":"qWnmapnJj2"},{"type":"text","value":" for information on student Google accounts.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"N9bkycds7e"}],"key":"g67w0s8W3t"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"For information on employee Google accounts visit the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"UeMGIrEeRi"},{"type":"link","url":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Google Accounts FAQ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"xT4o9TUxEQ"}],"urlSource":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","key":"fV41iog0NG"},{"type":"text","value":" on the employee intranet.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"VBU2C6cgBK"}],"key":"tjSwLUpsqn"}],"key":"oO9vZNdBiz"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"If a user logs in with a different Google-associated domain (e.g., ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"IbOG9DVjcO"},{"type":"inlineCode","value":"gmail.com","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"L2p8GTsGem"},{"type":"text","value":", ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ExVyCjQRx9"},{"type":"inlineCode","value":"berkeley.edu","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"zEiUvFVKFX"},{"type":"text","value":"), their account must be manually added to an approved list. To request access, the user should send their Google account email address to ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"qD9hoPLXoA"},{"type":"crossReference","label":"Sean Morris","identifier":"term-sean morris","kind":"definitionTerm","children":[{"type":"text","value":"Sean Morris","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"ikJBrMts1z"}],"template":"{name}","resolved":true,"html_id":"term-sean-morris","remote":true,"url":"/contacts","dataUrl":"/contacts.json","key":"X28jVfZ797"},{"type":"text","value":". Once the account is approved, they will be able to log in with that Google account.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"G1tcefaEOS"}],"key":"IKUY9XA0Zl"},{"type":"mermaid","value":"flowchart TD;\n    A[User accesses JupyterHub] --> B[Redirect to CILogon]\n    B --> C[User selects Google as Identity Provider]\n    C --> D[Redirect to Google Login]\n    D --> E[User logs in with Google]\n    E --> F[Google returns OAuth token to CILogon]\n    F --> G[CILogon returns assertion to JupyterHub]\n    G --> H[JupyterHub authenticates user]\n    H --> I[Spawn user server]\n    I --> J[User lands on JupyterHub interface]\n    J --> K[User interacts with JupyterHub]\n    \n    subgraph Google Services\n        E\n        F\n    end\n\n    subgraph CILogon\n        C\n        D\n        G\n    end\n\n    subgraph JupyterHub\n        B\n        H\n        I\n        J\n        K\n    end","position":{"start":{"line":20,"column":1},"end":{"line":51,"column":1}},"key":"jjEcqcgcvk"},{"type":"thematicBreak","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"LxFNpOYimf"},{"type":"heading","depth":2,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"WjXHqVmrl5"}],"identifier":"nbgitpuller","label":"nbgitpuller","html_id":"nbgitpuller","implicit":true,"key":"DLu44ajk1V"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"In order to synchronize the content hosted on GitHub with the content on a user’s JupyterHub storage while automatically handling the conflicts involved ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"eacNCjtu2E"},{"type":"inlineCode","value":"git","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"rWa6OZ909O"},{"type":"text","value":", we use the application ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"DmlH1AAgYT"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"GPOhRpteEP"}],"urlSource":"https://nbgitpuller.readthedocs.io/","key":"U3724gggv8"},{"type":"text","value":". Through ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"pUJNdD4f1e"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"KmQIMTBwzS"},{"type":"text","value":", we create links which our users click to pull in content available on a specified GitHub repository with the user’s files on the specified JupyterHub server. When there is a merge conflict, the tool handles the merge automatically according to the rules posted in the ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"lrfL4n6nLR"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"EynUpwfqCB"},{"type":"text","value":" documentation","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"XXvwb5lTqz"}],"urlSource":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","key":"C7YX3BNj2d"},{"type":"text","value":".","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"qj9MdQFXV5"}],"key":"aufLng8bx9"},{"type":"mermaid","value":"flowchart TD;\n    A[User clicks nbgitpuller link] --> B[nbgitpuller parses URL and identifies repo]\n    B --> C[nbgitpuller fetches repository content from GitHub]\n    C --> D[nbgitpuller pulls files into user's Jupyter environment]\n\n    subgraph GitHub\n        C\n    end\n\n    subgraph Canvas/Website\n        A\n    end\n\n    subgraph JupyterHub\n        B\n        D\n    end\n","position":{"start":{"line":58,"column":1},"end":{"line":77,"column":1}},"key":"hrLWEcm0Km"}],"key":"eVm4rZNOMt"}],"key":"ZVMTgMKIY0"},"references":{"cite":{"order":[],"data":{}}}}