{"version":2,"kind":"Article","sha256":"0aa40de007755b6b8983c748c21c86ae3e484d9303211a8e0ca73e7f3c6890e7","slug":"jupyterhub","location":"/jupyterhub.md","dependencies":[],"frontmatter":{"title":"JupyterHub","license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/ccsf-math-108/materials","funding":[{"statement":"This work was supported by California Education Learning Lab through the Building Inclusive and Collaborative Foundations in Data Science grant."}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ccsf-math-108/materials/blob/main/jupyterhub.md","exports":[{"format":"md","filename":"jupyterhub.md","url":"/jupyterhub-8a9868288d22582c19542bc586d6a8b8.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"A ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"H8dcizJrER"},{"type":"link","url":"https://jupyter.org/hub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"JupyterHub","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qy9H0oGDq9"}],"urlSource":"https://jupyter.org/hub","key":"KlVKjr9lec"},{"type":"text","value":", grant-supported by ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pfYkfLY7Zc"},{"type":"link","url":"https://www.cloudbank.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Cloudbank","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"g4TWfBHlf4"}],"urlSource":"https://www.cloudbank.org/","key":"iuWOVGW94Z"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"G1z6hfehxp"},{"type":"link","url":"https://2i2c.org/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2i2c","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KfVunxwJzP"}],"urlSource":"https://2i2c.org/","key":"Qx7HpUprk7"},{"type":"text","value":", is the central piece of our technology. The hub’s address is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DJsBWVMT7Y"},{"type":"inlineCode","value":"https://ccsf.cloudbank.2i2c.cloud","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PXEp4bD9uy"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AuSqsSpXOe"}],"key":"kvm3XXGasO"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"When a user clicks an ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zSfUTbKaYo"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Y8TZKkFytr"},{"type":"text","value":" link (e.g., from Canvas or a website), the system checks whether the user is authenticated with JupyterHub. If not, the user is redirected through the authentication flow (e.g., via CILogon + Google). Once authenticated, the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cTAegFHExe"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hwP9uodqUw"},{"type":"text","value":" link pulls content from a GitHub repository into the user’s environment and optionally opens a specific notebook or file.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qngKeUARql"}],"key":"t9VUEUUSsY"},{"type":"thematicBreak","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"EWTbjUDpF1"},{"type":"heading","depth":2,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Authentication","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NwGbOwBV9J"}],"identifier":"authentication","label":"Authentication","html_id":"authentication","implicit":true,"key":"VDVgTz2wXC"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CloudBank hubs are configured to use ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Xm8BLLrJqp"},{"type":"link","url":"https://www.cilogon.org/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CILogon","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"MBT6KVJJST"}],"urlSource":"https://www.cilogon.org/","key":"ylYtBRON6Y"},{"type":"text","value":" to manage user access. By default, users authenticate with their Google accounts. At CCSF, the ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"H6PEA3f0zs"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"CU0HENf8aY"},{"type":"text","value":" domain is associated with Google, so anyone logging in with a ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eFxNv1ps3e"},{"type":"inlineCode","value":"mail.ccsf.edu","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"FOwaL0qT7N"},{"type":"text","value":" account is automatically approved.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"F0meNqoAt7"}],"key":"uzb7Wxumcq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Consult IT’s webpage ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"DYBWDiL4c5"},{"type":"link","url":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"CCSFmail FAQ for Students","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"dBaCE55fZl"}],"urlSource":"https://www.ccsf.edu/about-ccsf/administration/finance-and-administration/information-technology-services/ccsfmail-faq-students","key":"X6agUoeOMq"},{"type":"text","value":" for information on student Google accounts.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"rlFQnjjdZz"}],"key":"jxfHFY7OR9"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"For information on employee Google accounts visit the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"LUYjyvZLLU"},{"type":"link","url":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Google Accounts FAQ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"G3ZSpWYQcA"}],"urlSource":"https://citycollegesf.sharepoint.com/sites/ITSServices/SitePages/Google-Account-FAQs.aspx","key":"tKd4prqyZ6"},{"type":"text","value":" on the employee intranet.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ua4AaFTADz"}],"key":"JtPMjopcWY"}],"key":"YxrRHybnmG"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"If a user logs in with a different Google-associated domain (e.g., ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FDn0fg3JIz"},{"type":"inlineCode","value":"gmail.com","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"KX0s960JLu"},{"type":"text","value":", ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"yNRzJ5jfHK"},{"type":"inlineCode","value":"berkeley.edu","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"EQTqKI2z4D"},{"type":"text","value":"), their account must be manually added to an approved list. To request access, the user should send their Google account email address to ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"MCOPVUP84I"},{"type":"crossReference","label":"Sean Morris","identifier":"term-sean morris","kind":"definitionTerm","children":[{"type":"text","value":"Sean Morris","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"lwpSHI9zAH"}],"template":"{name}","resolved":true,"html_id":"term-sean-morris","remote":true,"url":"/contacts","dataUrl":"/contacts.json","key":"Andn4DI5eg"},{"type":"text","value":". Once the account is approved, they will be able to log in with that Google account.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"PhoeGeYS2f"}],"key":"T0P0JQZy6K"},{"type":"mermaid","value":"flowchart TD;\n    A[User accesses JupyterHub] --> B[Redirect to CILogon]\n    B --> C[User selects Google as Identity Provider]\n    C --> D[Redirect to Google Login]\n    D --> E[User logs in with Google]\n    E --> F[Google returns OAuth token to CILogon]\n    F --> G[CILogon returns assertion to JupyterHub]\n    G --> H[JupyterHub authenticates user]\n    H --> I[Spawn user server]\n    I --> J[User lands on JupyterHub interface]\n    J --> K[User interacts with JupyterHub]\n    \n    subgraph Google Services\n        E\n        F\n    end\n\n    subgraph CILogon\n        C\n        D\n        G\n    end\n\n    subgraph JupyterHub\n        B\n        H\n        I\n        J\n        K\n    end","position":{"start":{"line":20,"column":1},"end":{"line":51,"column":1}},"key":"sDuF70zms6"},{"type":"thematicBreak","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"CQl2EsnEjq"},{"type":"heading","depth":2,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"m0qGgZJdLg"}],"identifier":"nbgitpuller","label":"nbgitpuller","html_id":"nbgitpuller","implicit":true,"key":"sQ9lHFsQkm"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"In order to synchronize the content hosted on GitHub with the content on a user’s JupyterHub storage while automatically handling the conflicts involved ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"YW5KMKVdeH"},{"type":"inlineCode","value":"git","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"RQlb4eyUiu"},{"type":"text","value":", we use the application ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"qzT0qFHnwt"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"NHp0lG3iuU"}],"urlSource":"https://nbgitpuller.readthedocs.io/","key":"a7pTM8my67"},{"type":"text","value":". Through ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"egygpH2IOF"},{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"lGQWUpoO96"},{"type":"text","value":", we create links which our users click to pull in content available on a specified GitHub repository with the user’s files on the specified JupyterHub server. When there is a merge conflict, the tool handles the merge automatically according to the rules posted in the ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"jRlaIXrOVk"},{"type":"link","url":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"nbgitpuller","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"ld1PELvhjM"},{"type":"text","value":" documentation","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"lxnkzYIYA8"}],"urlSource":"https://nbgitpuller.readthedocs.io/en/latest/topic/automatic-merging.html","key":"xWZaVD3wIw"},{"type":"text","value":".","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"OPiNn9a6dL"}],"key":"PXwFk65oT7"},{"type":"mermaid","value":"flowchart TD;\n    A[User clicks nbgitpuller link] --> B[nbgitpuller parses URL and identifies repo]\n    B --> C[nbgitpuller fetches repository content from GitHub]\n    C --> D[nbgitpuller pulls files into user's Jupyter environment]\n\n    subgraph GitHub\n        C\n    end\n\n    subgraph Canvas/Website\n        A\n    end\n\n    subgraph JupyterHub\n        B\n        D\n    end\n","position":{"start":{"line":58,"column":1},"end":{"line":77,"column":1}},"key":"Gyj4qd4HJW"}],"key":"DaNXuXrnrC"}],"key":"JYMM4lGkcb"},"references":{"cite":{"order":[],"data":{}}}}